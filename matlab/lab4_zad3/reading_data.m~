bag = rosbag('zad3_lab4.bag');

%gazebo_odom
bSel = select(bag,"Topic",'/gazebo_odom');
msgStructs = readMessages(bSel);
xPoints = cellfun(@(m) double(m.Pose.Pose.Position.X),msgStructs);
yPoints = cellfun(@(m) double(m.Pose.Pose.Position.Y),msgStructs);

figure(1)   
hold on;
plot(xPoints,yPoints)
xlabel('x');
ylabel('y');
xlim([-0.1 1.1]);
ylim([-0.1 1.4]);
title(['All topics']);
hold off;

%/elektron/mobile_base_controller/odom
bSel = select(bag,"Topic",'/elektron/mobile_base_controller/odom');
msgStructs = readMessages(bSel);
xPoints = cellfun(@(m) double(m.Pose.Pose.Position.X),msgStructs);
yPoints = cellfun(@(m) double(m.Pose.Pose.Position.Y),msgStructs);

%figure(2)
hold on;
plot(xPoints,yPoints)
hold off;

%/pose2D
bSel = select(bag,"Topic",'/pose2D');
msgStructs = readMessages(bSel);
xPoints = cellfun(@(m) double(m.X),msgStructs);
yPoints = cellfun(@(m) double(m.Y),msgStructs);

%figure(3)
hold on;
plot(xPoints,yPoints)
legend('/gazeboOdom','/elektron/odom','/pose2D')
hold off;
print ('All_topics', '-dpng', '-r400')

%wykres porownanwczy
figure(2)
x0=0
y0=0
x1=1
y1=1



print ('All_topics', '-dpng', '-r400')